<div class="space-y-6">
    <!-- Welcome Section -->
    <div class="bg-white rounded-xl p-6 shadow-sm border border-slate-100">
        <h2 class="text-2xl font-bold text-slate-800">Panel de Control</h2>
        <p class="text-slate-500">Bienvenido al sistema de gestión de inventarios.</p>
    </div>

    <!-- Stats Cards Component -->
    <app-stats-cards [ventasDelDia]="ventasDelDia" [totalVentas]="totalVentas" [productosBajos]="productosBajos"
        [clientesActivos]="clientesMasFrecuentes.length">
    </app-stats-cards>

    <!-- Main Content Grid -->
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
        <!-- Recent Sales Component -->
        <app-recent-sales [ventas]="ventasRecientes" [isLoading]="isLoading" (viewAll)="navegarAVentas()">
        </app-recent-sales>

        <!-- Low Stock Component -->
        <app-low-stock [productos]="productosBajoStock" [isLoading]="isLoading" (viewInventory)="navegarAInventario()">
        </app-low-stock>
    </div>

    <!-- Clientes Más Frecuentes y Productos -->
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
        <!-- Clientes Más Frecuentes -->
        <div class="bg-white rounded-xl shadow-sm border border-slate-100 overflow-hidden">
            <div class="p-6 border-b border-slate-100">
                <h3 class="font-bold text-slate-800">Clientes Más Frecuentes</h3>
            </div>
            <div *ngIf="isLoading" class="p-6 text-center">
                <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"></div>
            </div>
            <div *ngIf="!isLoading && clientesMasFrecuentes.length === 0" class="p-6 text-center text-slate-500 py-12">
                <i class="fas fa-users text-4xl mb-3 text-slate-300"></i>
                <p>No hay datos de clientes</p>
            </div>
            <div *ngIf="!isLoading && clientesMasFrecuentes.length > 0" class="divide-y divide-slate-100">
                <div *ngFor="let cliente of clientesMasFrecuentes" class="p-4 hover:bg-slate-50 transition">
                    <div class="flex justify-between items-center">
                        <div>
                            <p class="font-medium text-slate-800">{{ getNombreCliente(cliente.cliente_id, cliente.cliente) }}</p>
                            <p class="text-sm text-slate-500">{{ cliente.cantidad_ventas }} compras</p>
                        </div>
                        <div class="text-right">
                            <p class="font-bold text-slate-800">{{ cliente.total_gastado | currency }}</p>
                            <p class="text-xs text-slate-500">Total gastado</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Productos Más Comprados -->
        <div class="bg-white rounded-xl shadow-sm border border-slate-100 overflow-hidden">
            <div class="p-6 border-b border-slate-100">
                <h3 class="font-bold text-slate-800">Productos Más Comprados</h3>
            </div>
            <div *ngIf="isLoading" class="p-6 text-center">
                <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"></div>
            </div>
            <div *ngIf="!isLoading && productosMasComprados.length === 0" class="p-6 text-center text-slate-500 py-12">
                <i class="fas fa-shopping-bag text-4xl mb-3 text-slate-300"></i>
                <p>No hay datos de compras</p>
            </div>
            <div *ngIf="!isLoading && productosMasComprados.length > 0" class="divide-y divide-slate-100">
                <div *ngFor="let producto of productosMasComprados" class="p-4 hover:bg-slate-50 transition">
                    <div class="flex justify-between items-center">
                        <div>
                            <p class="font-medium text-slate-800">{{ getNombreArticulo(producto.articulo_id, producto.articulo) }}</p>
                            <p class="text-sm text-slate-500">{{ producto.cantidad_comprada }} unidades compradas</p>
                        </div>
                        <div class="text-right">
                            <p class="font-bold text-slate-800">{{ producto.total_compras | currency }}</p>
                            <p class="text-xs text-slate-500">Total invertido</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Productos Más y Menos Vendidos -->
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
        <!-- Productos Más Vendidos -->
        <div class="bg-white rounded-xl shadow-sm border border-slate-100 overflow-hidden">
            <div class="p-6 border-b border-slate-100">
                <h3 class="font-bold text-slate-800">Productos Más Vendidos</h3>
            </div>
            <div *ngIf="isLoading" class="p-6 text-center">
                <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"></div>
            </div>
            <div *ngIf="!isLoading && productosMasVendidos.length === 0" class="p-6 text-center text-slate-500 py-12">
                <i class="fas fa-star text-4xl mb-3 text-slate-300"></i>
                <p>No hay datos de ventas</p>
            </div>
            <div *ngIf="!isLoading && productosMasVendidos.length > 0" class="divide-y divide-slate-100">
                <div *ngFor="let producto of productosMasVendidos" class="p-4 hover:bg-slate-50 transition">
                    <div class="flex justify-between items-center">
                        <div>
                            <p class="font-medium text-slate-800">{{ getNombreArticulo(producto.articulo_id, producto.articulo) }}</p>
                            <p class="text-sm text-slate-500">{{ producto.cantidad_vendida }} unidades vendidas</p>
                        </div>
                        <div class="text-right">
                            <p class="font-bold text-green-600">{{ producto.total_ventas | currency }}</p>
                            <p class="text-xs text-slate-500">Total vendido</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Productos Menos Vendidos -->
        <div class="bg-white rounded-xl shadow-sm border border-slate-100 overflow-hidden">
            <div class="p-6 border-b border-slate-100">
                <h3 class="font-bold text-slate-800">Productos Menos Vendidos</h3>
            </div>
            <div *ngIf="isLoading" class="p-6 text-center">
                <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"></div>
            </div>
            <div *ngIf="!isLoading && productosMenosVendidos.length === 0" class="p-6 text-center text-slate-500 py-12">
                <i class="fas fa-chart-line text-4xl mb-3 text-slate-300"></i>
                <p>No hay datos de ventas</p>
            </div>
            <div *ngIf="!isLoading && productosMenosVendidos.length > 0" class="divide-y divide-slate-100">
                <div *ngFor="let producto of productosMenosVendidos" class="p-4 hover:bg-slate-50 transition">
                    <div class="flex justify-between items-center">
                        <div>
                            <p class="font-medium text-slate-800">{{ getNombreArticulo(producto.articulo_id, producto.articulo) }}</p>
                            <p class="text-sm text-slate-500">{{ producto.cantidad_vendida }} unidades vendidas</p>
                        </div>
                        <div class="text-right">
                            <p class="font-bold text-orange-600">{{ producto.total_ventas | currency }}</p>
                            <p class="text-xs text-slate-500">Total vendido</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>