<header
    class="bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 h-16 flex items-center justify-between px-6 shadow-sm z-10 transition-colors duration-200">
    <!-- Left Side (Title/Breadcrumb) -->
    <div class="flex items-center gap-4">
        <h1 class="text-xl font-semibold text-slate-800 dark:text-slate-100">Inicio</h1>
    </div>

    <!-- Right Side (Actions) -->
    <div class="flex items-center gap-4">
        <!-- Dark Mode Toggle -->
        <button (click)="toggleDarkMode()"
            class="relative p-2 text-slate-500 dark:text-slate-300 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-blue-50 dark:hover:bg-slate-700 rounded-full transition-colors"
            [title]="isDarkMode ? 'Modo claro' : 'Modo oscuro'">
            <i [class]="isDarkMode ? 'fas fa-sun text-lg' : 'fas fa-moon text-lg'"></i>
        </button>

        <!-- Fullscreen Toggle -->
        <button (click)="toggleFullscreen()"
            class="relative p-2 text-slate-500 dark:text-slate-300 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-blue-50 dark:hover:bg-slate-700 rounded-full transition-colors"
            [title]="isFullscreen ? 'Salir de pantalla completa' : 'Pantalla completa'">
            <i [class]="isFullscreen ? 'fas fa-compress text-lg' : 'fas fa-expand text-lg'"></i>
        </button>

        <!-- Notifications -->
        <button
            class="relative p-2 text-slate-500 dark:text-slate-300 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-blue-50 dark:hover:bg-slate-700 rounded-full transition-colors">
            <i class="fas fa-bell text-lg"></i>
            <span
                class="absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full border-2 border-white dark:border-slate-800"></span>
        </button>

        <!-- Profile Dropdown -->
        <div class="relative">
            <button (click)="toggleProfileMenu()"
                class="flex items-center gap-3 pl-2 pr-1 py-1 rounded-full hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors border border-transparent hover:border-slate-200 dark:hover:border-slate-600">
                <div class="text-right hidden sm:block">
                    <p class="text-sm font-medium text-slate-700 dark:text-slate-200">{{ (user$ | async)?.name ||
                        'Usuario' }}</p>
                    <p class="text-xs text-slate-500 dark:text-slate-400">{{ (user$ | async)?.rol?.nombre || 'Rol' }}
                    </p>
                </div>
                <div
                    class="w-9 h-9 rounded-full bg-blue-100 dark:bg-blue-900 text-blue-600 dark:text-blue-300 flex items-center justify-center font-bold border-2 border-white dark:border-slate-800 shadow-sm">
                    {{ (user$ | async)?.name?.charAt(0) || 'U' }}
                </div>
                <i class="fas fa-chevron-down text-xs text-slate-400 dark:text-slate-500"></i>
            </button>

            <!-- Dropdown Menu -->
            <div *ngIf="showProfileMenu"
                class="absolute right-0 mt-2 w-48 bg-white dark:bg-slate-800 rounded-lg shadow-lg border border-slate-100 dark:border-slate-700 py-1 animate-fade-in-down z-50">
                <a [routerLink]="['/perfil']" (click)="showProfileMenu = false"
                    class="block px-4 py-2 text-sm text-slate-700 dark:text-slate-200 hover:bg-slate-50 dark:hover:bg-slate-700 hover:text-blue-600 dark:hover:text-blue-400">
                    <i class="fas fa-user mr-2"></i> Perfil
                </a>
                <a [routerLink]="['/config/sistema']" (click)="showProfileMenu = false"
                    class="block px-4 py-2 text-sm text-slate-700 dark:text-slate-200 hover:bg-slate-50 dark:hover:bg-slate-700 hover:text-blue-600 dark:hover:text-blue-400">
                    <i class="fas fa-cog mr-2"></i> Configuración
                </a>
                <div class="border-t border-slate-100 dark:border-slate-700 my-1"></div>
                <button (click)="logout()"
                    class="w-full text-left px-4 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20">
                    <i class="fas fa-sign-out-alt mr-2"></i> Cerrar Sesión
                </button>
            </div>
        </div>
    </div>
</header>

<!-- Overlay for closing dropdown -->
<div *ngIf="showProfileMenu" (click)="showProfileMenu = false" class="fixed inset-0 z-0 cursor-default"></div>